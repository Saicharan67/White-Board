(this.webpackJsonpwhiteboard=this.webpackJsonpwhiteboard||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n.n(s),o=n(10),i=n.n(o),l=(n(17),n(4)),r=n(2),g=(n(18),n(11)),u=(n(19),function(e){var t,n,a=e.settingundo,o=e.settingredo,i=e.drawingStatus,l=e.flag,u=Object(s.useState)(1),d=Object(r.a)(u,2),m=d[0],b=d[1],j=Object(s.useState)(1),f=Object(r.a)(j,2),O=f[0],p=f[1];Object(s.useEffect)((function(){JSON.parse(localStorage.getItem("Pages"))&&(b(1),p(JSON.parse(localStorage.getItem("TotalPages"))))}),[]),Object(s.useEffect)((function(){localStorage.setItem("TotalPages",JSON.stringify(O))}),[O]),Object(s.useEffect)((function(){t=document.getElementsByClassName("canvas")[0],n=t.getContext("2d")})),Object(s.useEffect)((function(){a([]),o([])}),[m]),Object(s.useEffect)((function(){if(!i&&l)if(console.log(l),JSON.parse(localStorage.getItem("Pages"))){console.log("currpage",m);var e=JSON.parse(localStorage.getItem("Pages"));e[m-1]=t.toDataURL(),localStorage.setItem("Pages",JSON.stringify(e))}else localStorage.setItem("Pages",JSON.stringify([t.toDataURL()]))}),[i]);var N=function(){var e=JSON.parse(localStorage.getItem("Pages"));e[m-1]=t.toDataURL(),localStorage.setItem("Pages",JSON.stringify(e))},S=function(e){var t=JSON.parse(localStorage.getItem("Pages")),c=new Image;c.src=t[e-1],c.onload=function(){n.clearRect(0,0,1900,1e3),n.drawImage(c,0,0,1900,1e3,0,0,1900,1e3)}},h=function(){1!=m&&(N(),b(m-1),S(m-1))},v=function(){m==O?1==O?(localStorage.setItem("Pages",JSON.stringify([t.toDataURL()])),b(m+1),p(O+1),n.clearRect(0,0,1900,1e3)):(N(),n.clearRect(0,0,1900,1e3),b(m+1),p(O+1)):(N(),b(m+1),S(m+1))};return Object(c.jsxs)("div",{className:"page",children:[Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsxs)("button",{id:"newpagebuttons",className:"iconsbutton1",onClick:h,children:[Object(c.jsx)("img",{className:"icons prev",src:"./images/previous.png"}),"  "]}),Object(c.jsxs)("div",{className:"pagebox",children:[m,"/",O]}),Object(c.jsx)("button",{id:"newpagebuttons",className:"iconsbutton1",onClick:v,children:Object(c.jsx)("img",{className:"icons next",src:"./images/next.png"})})]}),Object(c.jsxs)("button",{id:"newpagebuttons",className:"iconsbutton1",onClick:function(){if(console.log(m),1==m){v(),b((function(e){return e-1})),p((function(e){return e-1}));var e=JSON.parse(localStorage.getItem("Pages")),t=Object(g.a)(e),n=(t[0],t.slice(1));localStorage.setItem("Pages",JSON.stringify(n))}else{var c=m,s=JSON.parse(localStorage.getItem("Pages"));h(),p((function(e){return e-1})),s.pop(c-1),localStorage.setItem("Pages",JSON.stringify(s))}},children:[Object(c.jsx)("img",{className:"icons delete",src:"./images/delete.png"}),"  "]})]})}),d=function(){var e,t,n=Object(s.useState)(!1),a=Object(r.a)(n,2),o=a[0],i=a[1],g=Object(s.useState)("black"),d=Object(r.a)(g,2),m=d[0],b=(d[1],Object(s.useState)("10")),j=Object(r.a)(b,2),f=j[0],O=(j[1],Object(s.useState)(2)),p=Object(r.a)(O,2),N=p[0],S=(p[1],Object(s.useState)([])),h=Object(r.a)(S,2),v=h[0],x=h[1],w=Object(s.useState)([]),k=Object(r.a)(w,2),y=k[0],C=k[1],P=Object(s.useState)(0),I=Object(r.a)(P,2),E=I[0],J=I[1],L=Object(s.useState)("pencil"),R=Object(r.a)(L,2),T=R[0],B=R[1];Object(s.useEffect)((function(){e=document.getElementsByClassName("canvas")[0],t=e.getContext("2d")})),Object(s.useEffect)((function(){window.addEventListener("load",(function(){if(console.log(JSON.parse(localStorage.getItem("Pages"))?JSON.parse(localStorage.getItem("Pages")).length:"notcame"),JSON.parse(localStorage.getItem("Pages"))){var e=JSON.parse(localStorage.getItem("Pages")),n=new Image;n.src=e[0],console.log(e[0]),n.onload=function(){t.clearRect(0,0,1900,1e3),t.drawImage(n,0,0,1900,1e3,0,0,1900,1e3)},x([]),C([]),J(1)}})),window.addEventListener("resize",(function(){window.location.reload()})),window.addEventListener("keydown",(function(n){"z"==n.key&&n.ctrlKey&&(console.log("came"),U(e,t))}))}),[]);var D=function(e,t,n){(n=n||!1)||x([]),t?"undo"==t.name?C((function(t){return[].concat(Object(l.a)(t),[e.toDataURL()])})):x((function(t){return[].concat(Object(l.a)(t),[e.toDataURL()])})):C((function(t){return[].concat(Object(l.a)(t),[e.toDataURL()])})),console.log(y.length,v.length)},U=function(e,t){M(e,t,{name:"undo",list:y},{name:"redo",list:v})},M=function(e,t,n,c){if(n.list.length){D(e,c,!0);var s=n.list.pop(),a=n.list;"undo"==n.name?C(Object(l.a)(a)):x(Object(l.a)(a));var o=new Image;o.src=s,o.onload=function(){t.clearRect(0,0,1900,1e3),t.drawImage(o,0,0,1900,1e3,0,0,1900,1e3)}}},W=function(n){if(o){e=document.getElementsByClassName("canvas")[0],(t=e.getContext("2d")).lineWidth="pencil"!=T?f:N,t.lineCap="round",t.strokeStyle="pencil"!=T?"white":m;var c=n.clientX-e.offsetLeft,s=n.clientY-e.offsetTop;t.lineTo(c,s),t.stroke(),t.beginPath(),t.moveTo(c,s)}};return Object(c.jsxs)("div",{className:"root",children:[Object(c.jsxs)("div",{className:"options",children:[Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)("button",{className:"iconsbutton",onClick:function(e){B("erase"),document.getElementsByClassName("canvas")[0].style.cursor="pointer"},children:Object(c.jsx)("img",{className:"icons eraser",src:"./images/eraser.png"})}),Object(c.jsx)("a",{className:"download",download:"canvas.png",children:Object(c.jsxs)("button",{className:"iconsbutton",type:"button",onClick:function(){var t=document.getElementsByClassName("download")[0],n=e.toDataURL("image/png").replace("image/png","image/octet-stream");t.setAttribute("href",n)},children:[" ",Object(c.jsx)("img",{className:"icons download",src:"./images/download.png"}),"   "]})}),Object(c.jsx)("button",{className:"iconsbutton",id:"pencil",onClick:function(e){B("pencil"),document.getElementsByClassName("canvas")[0].style.cursor="crosshair"},children:Object(c.jsx)("img",{className:" icons pencil",src:"./images/pen.png"})}),Object(c.jsx)("button",{className:"iconsbutton",id:"undo",onClick:function(){i(!1);var n=0,c=0,s=0;document.addEventListener("click",(function(e){return n=e.clientX,s=n,c=e.clientY,!1}),!1),document.addEventListener("keydown",(function(a){t.font="30px Times New Roman","Enter"==a.key?(n=s,c+=20):8===a.keyCode?(U(e,t),n-=t.measureText(a.key).width):(t.fillText(a.key,n,c),D(e),n+=t.measureText(a.key).width)}),!1)},children:Object(c.jsx)("img",{className:"icons text",src:"./images/text.png"})}),Object(c.jsx)("button",{className:"iconsbutton",id:"undo",onClick:function(){U(e,t)},children:Object(c.jsx)("img",{className:"icons undo",src:"./images/undo-arrow.png"})}),Object(c.jsx)("button",{className:"iconsbutton",id:"redo",onClick:function(){!function(e,t){M(e,t,{name:"redo",list:v},{name:"undo",list:y})}(e,t)},children:Object(c.jsx)("img",{className:"icons redo",src:"./images/redo-arrow.png"})}),Object(c.jsx)("button",{className:"iconsbutton",id:"redo",onClick:function(){t.clearRect(0,0,1900,1e3),x([]),C([])},children:Object(c.jsx)("img",{className:"icons undo",src:"./images/clear.png"})}),Object(c.jsx)("button",{className:"iconsbutton",onClick:function(){B("pencil");var n=100,c=130;document.getElementsByClassName("canvas")[0].addEventListener("click",(function(s){n=s.clientX-e.offsetLeft,c=s.clientY-e.offsetTop,t.beginPath(),t.lineWidth=N,t.strokeStyle=m,t.rect(n,c,300,150),t.stroke(),t.beginPath()}),{once:!0})},children:Object(c.jsx)("img",{className:"icons rectangle",src:"./images/rounded-rectangle.png"})}),Object(c.jsx)("button",{className:"iconsbutton",onClick:function(){B("pencil");var n=100,c=130;document.getElementsByClassName("canvas")[0].addEventListener("click",(function(s){n=s.clientX-e.offsetLeft,c=s.clientY-e.offsetTop,t.beginPath(),t.lineWidth=N,t.strokeStyle=m,t.rect(n,c,200,200),t.stroke(),t.beginPath()}),{once:!0})},children:Object(c.jsx)("img",{className:"icons square",src:"./images/rounded-square.png"})}),Object(c.jsx)("button",{className:"iconsbutton",onClick:function(){B("pencil");var n=100,c=130;document.getElementsByClassName("canvas")[0].addEventListener("click",(function(s){n=s.clientX-e.offsetLeft,c=s.clientY-e.offsetTop,t.beginPath(),t.lineWidth=N,t.strokeStyle=m,t.arc(n,c,200,0,2*Math.PI,!1),t.stroke(),t.beginPath()}),{once:!0})},children:Object(c.jsx)("img",{className:"icons circle",src:"./images/circle.png"})})]}),Object(c.jsx)("div",{className:"penciloptions"})]}),Object(c.jsx)(u,{settingundo:C,settingredo:x,drawingStatus:o,flag:E}),Object(c.jsx)("div",{className:"test",children:Object(c.jsx)("canvas",{ref:e,height:.85*window.innerHeight,width:.85*window.innerWidth,className:"canvas",onMouseDown:function(t){i(!0),D(e),console.log(e),localStorage.setItem("undo_list",JSON.stringify(y)),W(t)},onMouseUp:function(){i(!1),t.beginPath()},onMouseMove:W,children:" "})})]})};var m=function(){return Object(c.jsx)(d,{})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),a(e),o(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root")),b()}},[[20,1,2]]]);
//# sourceMappingURL=main.4ba8a4f8.chunk.js.map